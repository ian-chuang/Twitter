(this.webpackJsonptwitter=this.webpackJsonptwitter||[]).push([[0],{157:function(e,t,n){},170:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(21),i=n.n(c),o=(n(157),n(11)),s=n(9),l=n.n(s),u=n(16),d=n(8),j=n(60),b=n(13),p=n(19),m=(n(159),n(171),n(172),p.a.initializeApp({apiKey:"AIzaSyAbomVMK69tn0dV3INviORAHIRu8PLV7Pw",authDomain:"twitter-ba69b.firebaseapp.com",projectId:"twitter-ba69b",storageBucket:"twitter-ba69b.appspot.com",messagingSenderId:"107491492763",appId:"1:107491492763:web:0dff801ae2692fa0fbd73e",measurementId:Object({NODE_ENV:"production",PUBLIC_URL:"/Twitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyAbomVMK69tn0dV3INviORAHIRu8PLV7Pw",REACT_APP_APP_ID:"1:107491492763:web:0dff801ae2692fa0fbd73e",REACT_APP_AUTH_DOMAIN:"twitter-ba69b.firebaseapp.com",REACT_APP_MESSAGING_SENDER_ID:"107491492763",REACT_APP_PROJECT_ID:"twitter-ba69b",REACT_APP_STORAGE_BUCKET:"twitter-ba69b.appspot.com"}).REACT_APP_MEASUREMENT_ID})),f=m.auth(),h=m.firestore(),x=m.storage(),O=n(44),g=n(5),v=n(202),y=n(204),w=n(1),S=Object(v.a)((function(e){return{button:{borderRadius:"9999px",textTransform:"none",fontWeight:600,minWidth:"auto"}}}));function k(e){var t=e.children,n=e.className,a=void 0===n?"":n,r=Object(O.a)(e,["children","className"]),c=S();return Object(w.jsx)(y.a,Object(o.a)(Object(o.a)({className:Object(g.a)(c.button,a)},r),{},{children:t}))}var N=n(221),C=n(211),I=n(222),P=n(206),R=n(72),B=n(224),F=n(68),T=n.n(F),W=n(223);function E(e){return Object(w.jsx)(I.a,Object(o.a)(Object(o.a)({},e),{},{children:Object(w.jsxs)(R.a,{variant:"body2",color:"textSecondary",children:["Copyright \xa9 Ian Chuang ",(new Date).getFullYear(),"."]})}))}var z=Object(v.a)((function(e){return{root:{minHeight:"100vh",display:"flex",flexDirection:"column"},main:{flexGrow:1},image:{backgroundSize:"cover",backgroundPosition:"center",display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(2)},imageLogo:{width:"100%",height:"60%",maxWidth:"25rem",fill:"#fff"},authGrid:{display:"flex",alignItems:"center"},auth:{margin:e.spacing(8,4),width:"100%",maxWidth:"32rem",display:"flex",flexDirection:"column",alignItems:"flex-start"},form:{width:"100%"},submit:{margin:e.spacing(2,0),paddingTop:e.spacing(1.5),paddingBottom:e.spacing(1.5),fontSize:18},links:{gap:e.spacing(.5),display:"flex",justifyContent:"center"},footer:{padding:e.spacing(2),display:"flex",gap:e.spacing(2),flexWrap:"wrap",justifyContent:"center"}}}));function U(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(d.a)(c,2),o=i[0],s=i[1],j=Object(a.useState)(null),p=Object(d.a)(j,2),m=p[0],h=p[1],x=Object(a.useState)(!1),O=Object(d.a)(x,2),g=O[0],v=O[1],y=Object(b.g)(),S=z();function F(){return Object(w.jsx)("svg",{className:S.imageLogo,width:"100%",focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",children:Object(w.jsx)("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})})}var U=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),h(null),v(!0),e.prev=3,e.next=6,f.signInWithEmailAndPassword(n,o);case 6:y.push("/home"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),h(e.t0.message);case 12:return e.prev=12,v(!1),r(""),s(""),e.finish(12);case 17:case"end":return e.stop()}}),e,null,[[3,9,12,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)(I.a,{className:S.root,children:[Object(w.jsxs)(P.a,{container:!0,component:"main",className:S.main,children:[Object(w.jsx)(B.a,{xsDown:!0,children:Object(w.jsx)(P.a,{item:!0,sm:4,md:6,lg:7,className:S.image,style:{backgroundImage:"url(/auth_image.PNG)"},children:Object(w.jsx)(F,{})})}),Object(w.jsx)(P.a,{item:!0,xs:12,sm:8,md:6,lg:5,className:S.authGrid,children:Object(w.jsxs)("div",{className:S.auth,children:[Object(w.jsx)(T.a,{style:{fontSize:45},color:"primary"}),Object(w.jsx)(I.a,{fontWeight:"fontWeightBold",mt:3,fontSize:"h4.fontSize",children:"Log in to Twitter"}),m&&Object(w.jsx)(I.a,{width:"100%",my:2,children:Object(w.jsx)(W.a,{severity:"error",children:m})}),Object(w.jsxs)("form",{onSubmit:U,className:S.form,noValidate:!0,children:[Object(w.jsx)(N.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Email Address",type:"email",autoFocus:!0,value:n,onChange:function(e){return r(e.target.value)}}),Object(w.jsx)(N.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Password",type:"password",value:o,onChange:function(e){return s(e.target.value)}}),Object(w.jsx)(k,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",size:"large",className:S.submit,disabled:g,children:"Log in"}),Object(w.jsxs)("div",{className:S.links,children:[Object(w.jsx)(C.a,{variant:"body1",onClick:function(){y.push("/signup")},children:"Forgot password?"}),Object(w.jsx)(R.a,{variant:"body1",color:"textSecondary",children:"\xb7"}),Object(w.jsx)(C.a,{variant:"body1",onClick:function(){y.push("/signup")},children:"Sign up for Twitter"})]}),Object(w.jsx)(E,{mt:3,textAlign:"center"})]})]})})]}),Object(w.jsx)("div",{className:S.footer,children:["About","Help Center","Terms of Service","Privacy Policy","Cookie Policy","Ads info","Blog","Status","Careers","Brand Resources","Advertising","Marketing","Twitter for Business","Developers","Directory","Settings"].map((function(e,t){return Object(w.jsx)(C.a,{variant:"body2",color:"textSecondary",children:e},t)}))})]})}var L=n(226);function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(a.useState)(null),n=Object(d.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(null),o=Object(d.a)(i,2),s=o[0],j=o[1];Object(a.useEffect)((function(){if(s){var t=URL.createObjectURL(s);return c(t),function(){return URL.revokeObjectURL(t)}}c(e)}),[s,e]);var b=function(e){e.target.files&&0!==e.target.files.length?(j(e.target.files[0]),e.target.value=""):j(null)},p=function(){c(null),j(null)},m=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s||!r){e.next=9;break}return t=x.ref("".concat(Object(L.a)(),"-").concat(s.name)),e.next=4,t.put(s).then(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));case 4:return n=e.sent,p(),e.abrupt("return",n);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return[r,s,b,m,p]}var D=Object(v.a)((function(e){return{profilePicture:{minHeight:e.spacing(6),minWidth:e.spacing(6),borderRadius:"50%",backgroundSize:"cover",backgroundPosition:"center"}}}));function _(e){var t=e.src,n=e.children,a=e.className,r=Object(O.a)(e,["src","children","className"]),c=D();return Object(w.jsx)(I.a,Object(o.a)(Object(o.a)({},r),{},{className:Object(g.a)(c.profilePicture,a),style:{backgroundImage:"url(".concat(t||"/profile_picture.png",")")},children:n}))}var M=n(208),V=n(94),H=n.n(V),G=n(76),Y=n.n(G),K=Object(v.a)((function(e){return{profilePicture:{maxWidth:"15rem",width:"100%",borderRadius:"50%",height:"auto",minWidth:"5rem",aspectRatio:"1/1",backgroundSize:"cover",backgroundPosition:"center",position:"relative",margin:e.spacing(0,"auto")},center:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",gap:e.spacing(1)},iconButton:{color:"#fff",backgroundColor:"rgba(15, 20, 25, 0.75)","&:hover":{backgroundColor:"rgba(39,44,48,.75)"}}}}));function J(e){var t=e.profilePreview,n=e.handleProfileInputImage,a=e.removeProfileImage,r=K();return Object(w.jsx)(_,{className:r.profilePicture,src:t,children:Object(w.jsxs)(I.a,{className:r.center,children:[Object(w.jsxs)(M.a,{className:r.iconButton,component:"label",children:[Object(w.jsx)("input",{type:"file",onChange:n,hidden:!0}),Object(w.jsx)(Y.a,{})]}),t&&Object(w.jsx)(M.a,{className:r.iconButton,onClick:a,children:Object(w.jsx)(H.a,{})})]})})}var q=Object(v.a)((function(e){return{header:{backgroundSize:"cover",backgroundPosition:"center",position:"relative",backgroundColor:e.palette.grey[600]},pictureContainer:{display:"flex",flexWrap:"wrap",alignItems:"flex-start",justifyContent:"space-between",marginBottom:e.spacing(1),gap:e.spacing(1)},profilePicture:{position:"relative",borderRadius:"50%",alignSelf:"flex-end",width:"25%",height:"auto",minWidth:"48px",aspectRatio:"1/1",marginTop:"-16%",marginBottom:"-2px",marginLeft:e.spacing(2),borderStyle:"solid",borderWidth:"4px",borderColor:e.palette.background.default,backgroundSize:"cover",backgroundPosition:"center",backgroundColor:e.palette.grey[600]},center:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",gap:e.spacing(1)},iconButton:{padding:e.spacing(1),color:"#fff",backgroundColor:"rgba(15, 20, 25, 0.75)","&:hover":{backgroundColor:"rgba(39,44,48,.75)"}}}}));function Z(e){var t=e.profilePreview,n=e.headerPreview,a=e.handleProfileInputImage,r=void 0===a?null:a,c=e.handleHeaderInputImage,i=e.removeHeaderImage,o=q();return Object(w.jsxs)(I.a,{width:"100%",children:[Object(w.jsxs)(I.a,{className:o.header,style:{backgroundImage:"url(".concat(n,")")},children:[Object(w.jsx)(I.a,{width:"100%",pb:"33%"}),Object(w.jsxs)(I.a,{className:o.center,children:[Object(w.jsxs)(M.a,{className:o.iconButton,component:"label",children:[Object(w.jsx)("input",{type:"file",onChange:c,hidden:!0}),Object(w.jsx)(Y.a,{fontSize:"small"})]}),n&&Object(w.jsx)(M.a,{className:o.iconButton,onClick:i,children:Object(w.jsx)(H.a,{fontSize:"small"})})]})]}),Object(w.jsx)(_,{className:o.profilePicture,src:t,children:r&&Object(w.jsx)(I.a,{className:o.center,children:Object(w.jsxs)(M.a,{className:o.iconButton,component:"label",children:[Object(w.jsx)("input",{type:"file",onChange:r,hidden:!0}),Object(w.jsx)(Y.a,{fontSize:"small"})]})})})]})}var $=n(212),Q=Object(v.a)((function(e){return{root:{maxWidth:"32rem",margin:e.spacing(4,"auto")},content:{height:"30rem",display:"flex",flexDirection:"column",overflow:"auto"},primaryText:{fontSize:e.typography.h5.fontSize,color:e.palette.text.primary,fontWeight:e.typography.fontWeightBold,marginBottom:e.spacing(3)},secondaryText:{fontSize:e.typography.body2.fontSize,color:e.palette.text.secondary,marginBottom:e.spacing(4)},marginBottom:{marginBottom:e.spacing(3)},buttons:{display:"flex",gap:e.spacing(2)}}}));function X(){var e=Q(),t=Object(b.g)(),n=Object(a.useState)(""),r=Object(d.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(""),s=Object(d.a)(o,2),j=s[0],m=s[1],x=Object(a.useState)(""),O=Object(d.a)(x,2),g=O[0],v=O[1],y=Object(a.useState)(""),S=Object(d.a)(y,2),C=S[0],P=S[1],R=Object(a.useState)(""),B=Object(d.a)(R,2),F=B[0],E=B[1],z=Object(a.useState)(null),U=Object(d.a)(z,2),L=U[0],D=U[1],_=Object(a.useState)(!1),V=Object(d.a)(_,2),H=V[0],G=V[1],Y=A(),K=Object(d.a)(Y,5),q=K[0],X=(K[1],K[2]),ee=K[3],te=K[4],ne=A(),ae=Object(d.a)(ne,5),re=ae[0],ce=(ae[1],ae[2]),ie=ae[3],oe=ae[4],se=Object(a.useState)(0),le=Object(d.a)(se,2),ue=le[0],de=le[1],je=["Create account","Set password","Add profile picture","Add header","Create bio","Set username"],be=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,me(ue);case 3:if(!(n=e.sent)){e.next=7;break}return D(n),e.abrupt("return");case 7:D(null),ue+1<je.length?de(ue+1):pe();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(u.a)(l.a.mark((function e(){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(null),G(!0),e.prev=2,e.next=5,f.createUserWithEmailAndPassword(j,g);case 5:return n=e.sent,a=n.user,e.next=9,h.collection("uid").doc(a.uid).set({username:F});case 9:return e.t0=c,e.t1=j,e.t2=[],e.t3=[],e.t4=[],e.t5=[],e.t6=p.a.firestore.FieldValue.serverTimestamp(),e.t7=C,e.next=19,ie();case 19:return e.t8=e.sent,e.next=22,ee();case 22:return e.t9=e.sent,r={name:e.t0,email:e.t1,following:e.t2,followers:e.t3,likes:e.t4,retweets:e.t5,createdAt:e.t6,biography:e.t7,headerImageURL:e.t8,profilePictureURL:e.t9},e.next=26,h.collection("users").doc(F).set(r);case 26:t.push("/home"),e.next=33;break;case 29:e.prev=29,e.t10=e.catch(2),D(e.t10.message),de(0);case 33:return e.prev=33,G(!1),e.finish(33);case 36:case"end":return e.stop()}}),e,null,[[2,29,33,36]])})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=0===e.t0?3:1===e.t0?13:2===e.t0?16:3===e.t0?17:4===e.t0?18:5===e.t0?19:29;break;case 3:if(0!==c.length){e.next=5;break}return e.abrupt("return","Name is required.");case 5:if(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(j)){e.next=7;break}return e.abrupt("return","Invalid email address.");case 7:return e.next=9,h.collection("users").where("email","==",j).get();case 9:if(0===e.sent.docs.length){e.next=12;break}return e.abrupt("return","Your email is already taken.");case 12:return e.abrupt("break",30);case 13:if(!(g.length<=6)){e.next=15;break}return e.abrupt("return","Password must be greater than 6 characters.");case 15:case 16:case 17:case 18:return e.abrupt("break",30);case 19:if(0!==F.length){e.next=21;break}return e.abrupt("return","Username is required.");case 21:if(/^\S*$/.test(F)){e.next=23;break}return e.abrupt("return","No spaces are allowed in your username.");case 23:return e.next=25,h.collection("users").doc(F).get();case 25:if(!e.sent.exists){e.next=28;break}return e.abrupt("return","Your username is already taken.");case 28:return e.abrupt("break",30);case 29:return e.abrupt("return",null);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)($.a,{children:Object(w.jsx)(I.a,{className:e.root,children:Object(w.jsx)("form",{onSubmit:be,children:Object(w.jsxs)(I.a,{mb:3,children:[Object(w.jsx)(M.a,{color:"primary",onClick:function(){return t.push("/login")},children:Object(w.jsx)(T.a,{style:{fontSize:45}})}),Object(w.jsxs)(I.a,{className:e.content,children:[Object(w.jsx)(I.a,{flexGrow:1,my:4,children:function(t){switch(t){case 0:return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(I.a,{className:e.primaryText,children:"Create your account"}),L&&Object(w.jsx)(I.a,{width:"100%",mb:2,children:Object(w.jsx)(W.a,{severity:"error",children:L})}),Object(w.jsx)(N.a,{className:e.marginBottom,variant:"outlined",fullWidth:!0,label:"Name",type:"text",autoFocus:!0,value:c,onChange:function(e){return i(e.target.value)}}),Object(w.jsx)(N.a,{variant:"outlined",fullWidth:!0,label:"Email Address",type:"email",value:j,onChange:function(e){return m(e.target.value)}})]});case 1:return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(I.a,{className:e.primaryText,children:"You\u2019ll need a password"}),Object(w.jsx)(I.a,{className:e.secondaryText,children:"Make sure it's 6 characters or more."}),L&&Object(w.jsx)(I.a,{width:"100%",mb:2,children:Object(w.jsx)(W.a,{severity:"error",children:L})}),Object(w.jsx)(N.a,{variant:"outlined",fullWidth:!0,label:"Password",type:"password",value:g,onChange:function(e){return v(e.target.value)},autoFocus:!0})]});case 2:return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(I.a,{className:e.primaryText,children:"Pick a profile picture"}),Object(w.jsx)(I.a,{className:e.secondaryText,children:"Have a favorite selfie? Upload it now."}),L&&Object(w.jsx)(I.a,{width:"100%",mb:2,children:Object(w.jsx)(W.a,{severity:"error",children:L})}),Object(w.jsx)(J,{profilePreview:q,handleProfileInputImage:X,removeProfileImage:te})]});case 3:return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(I.a,{className:e.primaryText,children:"Pick a header"}),Object(w.jsx)(I.a,{className:e.secondaryText,children:"People who visit your profile will see it. Show your style."}),L&&Object(w.jsx)(I.a,{width:"100%",mb:2,children:Object(w.jsx)(W.a,{severity:"error",children:L})}),Object(w.jsx)(Z,{profilePreview:q,headerPreview:re,handleHeaderInputImage:ce,removeHeaderImage:oe})]});case 4:return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(I.a,{className:e.primaryText,children:"Describe yourself"}),Object(w.jsx)(I.a,{className:e.secondaryText,children:"What makes you special? Don't think too hard, just have fun with it."}),L&&Object(w.jsx)(I.a,{width:"100%",mb:2,children:Object(w.jsx)(W.a,{severity:"error",children:L})}),Object(w.jsx)(N.a,{variant:"outlined",fullWidth:!0,label:"Your bio",type:"text",value:C,onChange:function(e){return P(e.target.value)},inputProps:{maxLength:150},autoFocus:!0,multiline:!0})]});case 5:return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(I.a,{className:e.primaryText,children:"What should we call you?"}),Object(w.jsx)(I.a,{className:e.secondaryText,children:"Your @username is unique."}),L&&Object(w.jsx)(I.a,{width:"100%",mb:2,children:Object(w.jsx)(W.a,{severity:"error",children:L})}),Object(w.jsx)(N.a,{variant:"outlined",fullWidth:!0,label:"Username",type:"text",value:F,onChange:function(e){return E(e.target.value)},autoFocus:!0})]});default:return"Unknown step"}}(ue)}),Object(w.jsxs)("div",{className:e.buttons,children:[0!==ue&&Object(w.jsx)(k,{size:"large",onClick:function(){D(null),de((function(e){return e-1}))},variant:"contained",color:"secondary",fullWidth:!0,children:"Back"}),Object(w.jsx)(k,{variant:"contained",color:"primary",onClick:be,size:"large",type:"submit",fullWidth:!0,disabled:H,children:ue===je.length-1?"Sign up":"Next"})]})]})]})})})})}var ee=n(63),te=n(126),ne=n.n(te),ae=n(127),re=n.n(ae),ce=n(128),ie=n.n(ce),oe=n(129),se=n.n(oe),le=n(133),ue=n.n(le),de=n(130),je=n.n(de),be=n(131),pe=n.n(be),me=n(132),fe=n.n(me),he=n(134),xe=n.n(he),Oe=n(62),ge=n.n(Oe),ve=n(214),ye=n(225),we=n(35),Se=n(122),ke=n.n(Se),Ne=n(119),Ce=n.n(Ne),Ie=n(120),Pe=n.n(Ie),Re=n(121),Be=n.n(Re),Fe=n(213),Te=Object(v.a)((function(e){return{image:{width:"100%",objectFit:"cover",borderRadius:"1rem",cursor:"pointer"},closeButton:{position:"absolute",top:e.spacing(1),left:e.spacing(1),padding:e.spacing(.75),color:"#fff",backgroundColor:"rgba(15, 20, 25, 0.75)","&:hover":{backgroundColor:"rgba(39,44,48,.75)"}},modal:{overflowY:"auto",display:"flex",justifyContent:"center",alignItems:"center"},modalImage:{maxWidth:"50rem",width:"100%",borderRadius:"1rem"}}}));function We(e){var t=e.src,n=e.removeImage,r=void 0===n?null:n,c=e.contain,i=void 0===c||c,s=e.showModal,l=void 0===s||s,u=Object(O.a)(e,["src","removeImage","contain","showModal"]),j=Te(),b=Object(a.useState)(!1),p=Object(d.a)(b,2),m=p[0],f=p[1],h=function(){f(!1)},x=function(e){e.stopPropagation(),f(!0)};return Object(w.jsx)(w.Fragment,{children:t&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(I.a,Object(o.a)(Object(o.a)({position:"relative"},u),{},{children:[Object(w.jsx)("img",{src:t,alt:"Twitter Image...",className:j.image,onClick:l?x:null,style:{maxHeight:i?"18rem":"auto"}}),r&&Object(w.jsx)(k,{className:j.closeButton,variant:"contained",onClick:r,children:Object(w.jsx)(ge.a,{fontSize:"small"})})]})),l&&Object(w.jsx)(ye.a,{open:m,onClose:h,BackdropProps:{style:{backgroundColor:"rgba(91, 112, 131, 0.4)"}},className:j.modal,children:Object(w.jsxs)(I.a,{position:"relative",m:"auto",children:[Object(w.jsx)("img",{src:t,alt:"Twitter Image...",className:j.modalImage,onClick:x}),Object(w.jsx)(k,{className:j.closeButton,variant:"contained",onClick:h,children:Object(w.jsx)(ge.a,{})})]})})]})})}var Ee=n(20),ze=n(101);function Ue(e,t){var n=function(){};return e.following.length>0?n=h.collection("tweets").where("parent","==",null).where("username","in",[e.username].concat(Object(ze.a)(e.following))).orderBy("timestamp","desc").onSnapshot((function(e){var n=e.docs.map((function(e){var t=e.data(),n=e.id;return Object(o.a)({id:n},t)}));t(n)})):t([]),function(){return n()}}function Le(e){return h.collection("users").doc(e).get().then((function(t){if(t.exists)return Object(o.a)(Object(o.a)({},t.data()),{},{username:e})}))}function Ae(e,t){h.collection("activity").add({username:e,message:t,timestamp:p.a.firestore.FieldValue.serverTimestamp()})}var De=n(228),_e=Object(v.a)((function(e){return{root:{display:"flex",alignItems:"flex-start",padding:e.spacing(2)},content:{display:"flex",flexDirection:"column",width:"100%",marginLeft:e.spacing(2),gap:e.spacing(2)},textField:{},iconButton:{padding:e.spacing(1),marginRight:e.spacing(1)},progress:{marginLeft:"auto",marginRight:e.spacing(2),fontSize:"16"}}}));function Me(e){var t=e.divider,n=void 0===t||t,c=e.minRows,i=void 0===c?1:c,o=e.onSend,s=void 0===o?null:o,j=e.parent,b=void 0===j?null:j,m=_e(),f=Object(we.a)(),x=Object(Ee.c)((function(e){return e.user})).user,O=Object(a.useState)(""),g=Object(d.a)(O,2),v=g[0],y=g[1],S=Object(a.useState)(!1),C=Object(d.a)(S,2),P=C[0],R=C[1],B=Object(a.useState)(0),F=Object(d.a)(B,2),T=F[0],W=F[1],E=A(),z=Object(d.a)(E,5),U=z[0],L=z[1],D=z[2],V=z[3],H=z[4],G=[{text:"GIF",icon:Object(w.jsx)(Ce.a,{}),action:null},{text:"Emoji",icon:Object(w.jsx)(Pe.a,{}),action:null},{text:"Poll",icon:Object(w.jsx)(Be.a,{}),action:null}],Y=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),R(!0),e.t0=h.collection("tweets"),e.t1=x.username,e.t2=v,e.t3=b,e.next=8,V();case 8:e.t4=e.sent,e.t5=p.a.firestore.FieldValue.serverTimestamp(),e.t6=[],e.t7=[],e.t8=[],e.t9={username:e.t1,message:e.t2,parent:e.t3,imageUrl:e.t4,timestamp:e.t5,likes:e.t6,retweets:e.t7,replies:e.t8},e.t0.add.call(e.t0,e.t9),y(""),W(0),R(!1),Ae(x.username,"".concat(x.name," tweeted something.")),s&&s();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=v.length>280||0===v.length&&(!L||!U)||P;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("form",{className:m.root,onSubmit:Y,children:[Object(w.jsx)(_,{src:x&&(x.profilePictureURL?x.profilePictureURL:"/profile_picture.png")}),Object(w.jsxs)(I.a,{className:m.content,children:[Object(w.jsx)(N.a,{className:m.textField,placeholder:b?"Tweet your reply":"What's happening?",type:"text",onChange:function(e){var t=e.target.value;y(t),W(t.length/280*100)},value:v,multiline:!0,InputProps:{style:{fontSize:20},disableUnderline:!0},maxRows:20,minRows:U?1:i}),Object(w.jsx)(We,{src:U,removeImage:H}),Object(w.jsxs)(I.a,{display:"flex",alignItems:"center",children:[Object(w.jsxs)(M.a,{className:m.iconButton,color:"primary",component:"label",children:[Object(w.jsx)("input",{type:"file",onChange:D,hidden:!0}),Object(w.jsx)(ke.a,{})]}),G.map((function(e,t){return Object(w.jsx)(De.a,{title:"Not functional",arrow:!0,children:Object(w.jsx)(M.a,{className:m.iconButton,color:"primary","aria-label":e.text,children:r.a.cloneElement(e.icon,{fontSize:"small"})})},t)})),Object(w.jsx)(Fe.a,{className:m.progress,variant:"determinate",value:Math.min(100,T),style:{color:v.length>280?f.palette.error.main:f.palette.primary.main},size:30,thickness:5}),Object(w.jsx)(k,{type:"submit",color:"primary",variant:"contained",disabled:K,children:"Tweet"})]})]})]}),n&&Object(w.jsx)(ve.a,{})]})}var Ve=Object(v.a)((function(e){return{modal:{overflowY:"auto"},content:{position:"absolute",top:"5%",marginLeft:"auto",marginRight:"auto",left:0,right:0,maxWidth:"38rem",width:"100%",backgroundColor:e.palette.background.default,borderRadius:"1rem"},closeButton:{padding:e.spacing(1)}}}));function He(e){var t=e.handleClose,n=e.open,a=Ve();return Object(w.jsx)(ye.a,{open:n,onClose:t,BackdropProps:{style:{backgroundColor:"rgba(91, 112, 131, 0.4)"}},className:a.modal,children:Object(w.jsxs)("div",{className:a.content,children:[Object(w.jsx)(I.a,{p:1,children:Object(w.jsx)(M.a,{"aria-label":"close",className:a.closeButton,onClick:t,children:Object(w.jsx)(ge.a,{})})}),Object(w.jsx)(ve.a,{}),Object(w.jsx)(Me,{divider:!1,minRows:5,onSend:t})]})})}var Ge=n(69),Ye=function(e){return{type:"SET_USER",payload:e}},Ke=function(e){return{type:"SET_FIREBASE_USER",payload:e}},Je=Object(v.a)((function(e){var t,n;return{root:(t={padding:e.spacing(1,2,2,0),maxWidth:"16rem",display:"flex",flexDirection:"column",gap:e.spacing(.5)},Object(ee.a)(t,e.breakpoints.up("lg"),{flex:1,alignItems:"flex-start"}),Object(ee.a)(t,e.breakpoints.down("md"),{alignItems:"center"}),t),logo:{padding:e.spacing(1.5)},navLink:(n={},Object(ee.a)(n,e.breakpoints.up("lg"),{padding:e.spacing(1.5,2.5,1.5,1.5)}),Object(ee.a)(n,e.breakpoints.down("md"),{padding:e.spacing(1.5)}),n),navText:{marginLeft:e.spacing(2)},tweetButtonLg:{marginTop:e.spacing(3),paddingTop:e.spacing(1.5),paddingBottom:e.spacing(1.5),fontSize:16,width:"100%"},tweetButtonSm:{marginTop:e.spacing(1.5),padding:e.spacing(1.5)}}}));function qe(){var e=Je(),t=Object(b.g)(),n=Object(Ee.b)(),c=Object(a.useState)(!1),i=Object(d.a)(c,2),o=i[0],s=i[1],l=Object(Ee.c)((function(e){return e.theme})).type,u=Object(Ee.c)((function(e){return e.user})).user,j=function(){s(!0)},p=[{text:"Home",icon:Object(w.jsx)(ne.a,{}),onClick:function(){return t.push("/home")}},{text:"Explore",icon:Object(w.jsx)(re.a,{}),onClick:function(){return t.push("/explore")}},{text:"Profile",icon:Object(w.jsx)(ie.a,{}),onClick:function(){return t.push("/profile/".concat(u.username))}},{text:"Settings",icon:Object(w.jsx)(se.a,{}),onClick:function(){return t.push("/settings")}},{text:"Toggle Theme",icon:"dark"===l?Object(w.jsx)(je.a,{}):"dim"===l?Object(w.jsx)(pe.a,{}):Object(w.jsx)(fe.a,{}),onClick:function(){return n({type:"TOGGLE_THEME"})}},{text:"Log out",icon:Object(w.jsx)(ue.a,{}),onClick:function(){f.signOut().then((function(){return t.push("/login")})).catch((function(e){return console.log(e)}))}}];return u||(p=[p[1],p[4]]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(Ge.a,{className:e.root,children:[Object(w.jsx)(k,{className:e.logo,color:"primary",children:Object(w.jsx)(T.a,{style:{fontSize:32}})}),p.map((function(t,n){return Object(w.jsxs)(k,{onClick:t.onClick,className:e.navLink,children:[r.a.cloneElement(t.icon,{style:{fontSize:32}}),Object(w.jsx)(B.a,{mdDown:!0,children:Object(w.jsx)(R.a,{className:e.navText,variant:"h6",children:t.text})})]},n)})),u&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(B.a,{mdDown:!0,children:Object(w.jsx)(k,{onClick:j,className:e.tweetButtonLg,color:"primary",variant:"contained",size:"large",children:"Tweet"})}),Object(w.jsx)(B.a,{lgUp:!0,children:Object(w.jsx)(k,{onClick:j,className:e.tweetButtonSm,color:"primary",variant:"contained",children:Object(w.jsx)(xe.a,{style:{fontSize:35}})})})]})]}),u&&Object(w.jsx)(He,{handleClose:function(){s(!1)},open:o})]})}var Ze=Object(v.a)((function(e){return{root:{display:"flex",flexGrow:1,flexDirection:"column",minHeight:"100vh",maxWidth:"38rem"}}}));function $e(e){var t=e.children,n=e.divider,a=void 0===n||n,r=Ze();return Object(w.jsxs)(w.Fragment,{children:[a&&Object(w.jsx)(ve.a,{orientation:"vertical",flexItem:!0}),Object(w.jsx)("div",{className:r.root,children:t}),a&&Object(w.jsx)(ve.a,{orientation:"vertical",flexItem:!0})]})}var Qe=n(135),Xe=n.n(Qe),et=Object(v.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.default,zIndex:e.zIndex.appBar},backButton:{marginRight:e.spacing(2),padding:e.spacing(1)}}}));function tt(e){var t=e.title,n=e.divider,a=void 0===n||n,r=e.backButton,c=void 0!==r&&r,i=et(),o=Object(b.g)();return Object(w.jsxs)(Ge.a,{className:i.root,children:[Object(w.jsxs)(I.a,{py:1,px:2,display:"flex",alignItems:"center",children:[c&&Object(w.jsx)(M.a,{className:i.backButton,onClick:o.goBack,children:Object(w.jsx)(Xe.a,{fontSize:"small"})}),Object(w.jsx)(R.a,{variant:"h6",children:t})]}),a&&Object(w.jsx)(ve.a,{})]})}var nt=n(95),at=n.n(nt),rt=n(96),ct=n.n(rt),it=n(98),ot=n.n(it),st=n(97),lt=n.n(st),ut=n(99),dt=n.n(ut);function jt(e){var t=6e4,n=36e5,a=864e5,r=new Date-e;return r<0?"0s":r<t?Math.round(r/1e3)+"s":r<n?Math.round(r/t)+"m":r<a?Math.round(r/n)+"h":r<2592e6?"".concat(e.toLocaleString("en-us",{month:"short"})," ").concat(e.getDate()):r<31536e6?"".concat(e.toLocaleString("en-us",{month:"short"})," ").concat(e.getDate(),", ").concat(e.getFullYear()):void 0}var bt=Object(v.a)((function(e){return{tweet:{display:"flex",alignItems:"flex-start",padding:e.spacing(1.75,2,1,2),cursor:"pointer",zIndex:-1},content:{marginLeft:e.spacing(2),width:"100%",display:"flex",flexDirection:"column"},tweetInfo:{display:"flex",gap:e.spacing(.5),marginBottom:e.spacing(1)},tweetMessage:{whiteSpace:"pre-line",marginBottom:e.spacing(1)},tweetImage:{margin:e.spacing(.5,0,.5,0)},iconButton:{padding:e.spacing(1),marginRight:e.spacing(1)}}}));function pt(e){var t,n,c,i=e.tweet,o=e.divider,s=void 0===o||o,j=bt(),m=Object(we.a)(),f=Object(b.g)(),x=Object(Ee.c)((function(e){return e.user})).user,O=Object(a.useState)(null),g=Object(d.a)(O,2),v=g[0],y=g[1],S=Object(a.useState)(null),N=Object(d.a)(S,2),P=N[0],B=N[1],F=Object(a.useState)(null),T=Object(d.a)(F,2),W=T[0],E=T[1],z=Object(a.useState)(null),U=Object(d.a)(z,2),L=U[0],A=U[1],D=Object(a.useState)(null),M=Object(d.a)(D,2),V=M[0],H=M[1],G=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.next=3,E((function(e){return!e}));case 3:return e.next=5,h.collection("tweets").doc(i.id).update({likes:W?p.a.firestore.FieldValue.arrayRemove(x.username):p.a.firestore.FieldValue.arrayUnion(x.username)});case 5:return e.next=7,h.collection("users").doc(x.username).update({likes:W?p.a.firestore.FieldValue.arrayRemove(i.id):p.a.firestore.FieldValue.arrayUnion(i.id)});case 7:B((function(e){return W?e-1:e+1}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),H((function(e){return!e})),e.next=4,h.collection("tweets").doc(i.id).update({retweets:V?p.a.firestore.FieldValue.arrayRemove(x.username):p.a.firestore.FieldValue.arrayUnion(x.username)});case 4:return e.next=6,h.collection("users").doc(x.username).update({retweets:V?p.a.firestore.FieldValue.arrayRemove(i.id):p.a.firestore.FieldValue.arrayUnion(i.id)});case 6:A((function(e){return V?e-1:e+1}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)(Object(u.a)(l.a.mark((function e(){var t,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=y,e.next=3,Le(null===i||void 0===i?void 0:i.username);case 3:e.t1=e.sent,(0,e.t0)(e.t1),B(null===i||void 0===i||null===(t=i.likes)||void 0===t?void 0:t.length),E(null===x||void 0===x||null===(n=x.likes)||void 0===n?void 0:n.includes(null===i||void 0===i?void 0:i.id)),A(null===i||void 0===i||null===(a=i.retweets)||void 0===a?void 0:a.length),H(null===x||void 0===x||null===(r=x.retweets)||void 0===r?void 0:r.includes(null===i||void 0===i?void 0:i.id));case 9:case"end":return e.stop()}}),e)}))),[i.id]);var K=[{text:"Reply",icon:Object(w.jsx)(at.a,{}),value:null===i||void 0===i||null===(t=i.replies)||void 0===t?void 0:t.length,action:null,color:"#fff",activated:!1},{text:"Retweet",icon:Object(w.jsx)(ct.a,{}),value:L,action:Y,color:"rgb(0, 186, 124)",activated:V},{text:"Like",icon:W?Object(w.jsx)(lt.a,{}):Object(w.jsx)(ot.a,{}),value:P,action:G,color:"rgb(249, 24, 128)",activated:W},{text:"Share",icon:Object(w.jsx)(dt.a,{}),value:null,action:null,color:"#fff",activated:!1}];return Object(w.jsx)(w.Fragment,{children:i&&v&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:j.tweet,onClick:function(){return f.push("/tweet/".concat(i.id))},children:[Object(w.jsx)(_,{src:v.profilePictureURL,onClick:function(e){e.stopPropagation(),f.push("/profile/".concat(i.username))}}),Object(w.jsxs)(I.a,{className:j.content,children:[Object(w.jsxs)(I.a,{className:j.tweetInfo,children:[Object(w.jsx)(C.a,{variant:"body2",color:"textPrimary",component:"span",noWrap:!0,onClick:function(e){e.stopPropagation(),f.push("/profile/".concat(i.username))},children:Object(w.jsx)(I.a,{fontWeight:"fontWeightMedium",children:v.name})}),i.timestamp&&["@".concat(v.username),"\xb7",jt(null===(n=i.timestamp)||void 0===n?void 0:n.toDate())].map((function(e,t){return Object(w.jsx)(R.a,{variant:"body2",color:"textSecondary",component:"span",noWrap:!0,children:e},t)}))]}),(null===(c=i.message)||void 0===c?void 0:c.length)>0&&Object(w.jsx)(R.a,{variant:"body2",color:"textPrimary",className:j.tweetMessage,children:i.message}),Object(w.jsx)(We,{src:i.imageUrl,className:j.tweetImage,showModal:!1}),Object(w.jsx)(I.a,{display:"flex",alignItems:"center",children:K.map((function(e,t){return Object(w.jsx)(I.a,{width:"100%",display:"flex",alignItems:"center",children:e.action?Object(w.jsxs)(k,{style:{color:e.activated?e.color:m.palette.text.secondary},size:"small",onClick:e.action,children:[r.a.cloneElement(e.icon,{style:{fontSize:20}}),e.value>0&&Object(w.jsx)(I.a,{ml:1,fontSize:13,children:e.value})]}):Object(w.jsx)(De.a,{title:"Not functional",arrow:!0,children:Object(w.jsx)(k,{style:{color:e.activated?e.color:m.palette.text.secondary},size:"small",onClick:function(e){e.stopPropagation()},children:r.a.cloneElement(e.icon,{style:{fontSize:20}})})})},t)}))})]})]}),s&&Object(w.jsx)(ve.a,{})]})})}function mt(e){var t=e.tweets;return Object(w.jsx)("div",{children:t&&Object(w.jsxs)(w.Fragment,{children:[t.map((function(e,t){return Object(w.jsx)(pt,{tweet:e},t)})),Object(w.jsx)("div",{style:{height:"30vh"}})]})})}var ft=Object(v.a)((function(e){return{root:{flex:1,maxWidth:"24rem",minWidth:"20rem",display:"flex",flexDirection:"column",padding:e.spacing(2,0,2,2),gap:e.spacing(2)}}}));function ht(e){var t=e.children,n=e.copyright,a=void 0===n||n,r=ft();return Object(w.jsx)(B.a,{smDown:!0,children:Object(w.jsxs)(Ge.a,{className:r.root,children:[t,a&&Object(w.jsx)(E,{textAlign:"center"})]})})}var xt=n(215),Ot=n(207),gt=n(136),vt=n.n(gt),yt=Object(v.a)((function(e){return{root:{padding:e.spacing(1,2),borderRadius:"9999px"}}}));function wt(e){e.children;var t=yt();return Object(w.jsx)(Ot.a,{className:t.root,children:Object(w.jsx)("form",{children:Object(w.jsx)(N.a,{placeholder:"Search Twitter...",type:"text",InputProps:{startAdornment:Object(w.jsx)(xt.a,{position:"start",children:Object(w.jsx)(vt.a,{})}),disableUnderline:!0}})})})}var St=n(210),kt=n(216),Nt=n(217),Ct=Object(v.a)((function(e){return{root:{borderRadius:e.spacing(2)},list:{padding:0},listItem:{padding:e.spacing(1.5,2)},showMore:{padding:e.spacing(1.5,2),borderRadius:e.spacing(0,0,2,2)},avatar:{marginRight:e.spacing(2)}}}));function It(){var e=Ct(),t=Object(b.g)(),n=Object(a.useState)(null),r=Object(d.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){var e=function(e){var t=h.collection("activity").orderBy("timestamp","desc").limit(4).onSnapshot(function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,Promise.all(n.docs.map(function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data(),e.next=3,h.collection("users").doc(n.username).get().then((function(e){return e.data()}));case 3:return a=e.sent,e.abrupt("return",Object(o.a)({profilePictureURL:null===a||void 0===a?void 0:a.profilePictureURL},n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return function(){return t()}}(i);return function(){return e()}}),[]),Object(w.jsx)(Ot.a,{className:e.root,children:Object(w.jsxs)(St.a,{className:e.list,children:[Object(w.jsx)(kt.a,{className:e.listItem,children:Object(w.jsx)(R.a,{variant:"h6",children:"What's happening"})}),c&&c.map((function(n,a){var r;return Object(w.jsxs)(kt.a,{className:e.listItem,onClick:function(){return t.push("/profile/".concat(n.username))},button:!0,children:[Object(w.jsx)(_,{className:e.avatar,src:null===n||void 0===n?void 0:n.profilePictureURL}),Object(w.jsx)(Nt.a,{secondary:jt(null===(r=n.timestamp)||void 0===r?void 0:r.toDate()),children:Object(w.jsx)(R.a,{variant:"body2",children:null===n||void 0===n?void 0:n.message})})]},a)})),Object(w.jsx)(kt.a,{className:e.showMore,onClick:function(){return t.push("/activity")},button:!0,children:Object(w.jsx)(C.a,{href:"#",style:{textDecoration:"none"},children:"Show more"})})]})})}var Pt=n(218);function Rt(e){var t=e.user,n=Object(O.a)(e,["user"]),r=Object(Ee.c)((function(e){return e.user})).user,c=Object(a.useState)(r.following.includes(t.username)),i=Object(d.a)(c,2),s=i[0],j=i[1],b=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s||Ae(r.username,"".concat(r.name," followed ").concat(t.name,".")),j((function(e){return!e})),e.next=4,h.collection("users").doc(t.username).update({followers:s?p.a.firestore.FieldValue.arrayRemove(r.username):p.a.firestore.FieldValue.arrayUnion(r.username)});case 4:return e.next=6,h.collection("users").doc(r.username).update({following:s?p.a.firestore.FieldValue.arrayRemove(t.username):p.a.firestore.FieldValue.arrayUnion(t.username)});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)(w.Fragment,{children:s?Object(w.jsx)(k,Object(o.a)(Object(o.a)({variant:"outlined",color:"secondary",onClick:b},n),{},{children:"Following"})):Object(w.jsx)(k,Object(o.a)(Object(o.a)({variant:"contained",color:"secondary",onClick:b},n),{},{children:"Follow"}))})}var Bt=Object(v.a)((function(e){return{root:{borderRadius:e.spacing(2)},list:{padding:0},listItem:{padding:e.spacing(1.5,2)},showMore:{padding:e.spacing(1.5,2),borderRadius:e.spacing(0,0,2,2)},avatar:{marginRight:e.spacing(2)}}}));function Ft(){var e=Bt(),t=Object(b.g)(),n=Object(Ee.c)((function(e){return e.user})).user,r=Object(a.useState)(null),c=Object(d.a)(r,2),i=c[0],s=c[1];return Object(a.useEffect)(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,t=n,h.collection("users").where(p.a.firestore.FieldPath.documentId(),"not-in",[t.username].concat(Object(ze.a)(t.following))).limit(2).get().then((function(e){return e.docs.map((function(e){var t=e.id,n=e.data();return Object(o.a)(Object(o.a)({},n),{},{username:t})}))}));case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}var t}),e)}))),[]),Object(w.jsx)(w.Fragment,{children:i&&Object(w.jsx)(Ot.a,{className:e.root,children:Object(w.jsxs)(St.a,{className:e.list,children:[Object(w.jsx)(kt.a,{className:e.listItem,children:Object(w.jsx)(R.a,{variant:"h6",children:"Who to follow"})}),i&&i.map((function(n,a){return Object(w.jsxs)(kt.a,{className:e.listItem,button:!0,onClick:function(){return t.push("/profile/".concat(n.username))},children:[Object(w.jsx)(_,{src:n.profilePictureURL,className:e.avatar}),Object(w.jsx)(Nt.a,{secondary:"@".concat(n.username),children:Object(w.jsx)(R.a,{variant:"body2",component:"span",children:Object(w.jsx)(I.a,{fontWeight:"fontWeightMedium",children:n.name})})}),Object(w.jsx)(Pt.a,{children:Object(w.jsx)(Rt,{size:"small",user:n,children:"Follow"})})]},a)})),Object(w.jsx)(kt.a,{className:e.showMore,onClick:function(){return t.push("/connect")},button:!0,children:Object(w.jsx)(C.a,{href:"#",style:{textDecoration:"none"},children:"Show more"})})]})})})}var Tt=Object(v.a)((function(e){return{root:{width:"auto",marginTop:e.spacing(8),alignSelf:"center",maxWidth:"20rem"}}}));function Wt(e){var t=e.display,n=Tt(),a=Object(b.g)();return Object(w.jsx)(w.Fragment,{children:t&&Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(I.a,{className:n.root,children:[Object(w.jsx)(I.a,{fontWeight:"fontWeightBold",fontSize:"h4.fontSize",mb:1,children:"Welcome to Twitter!"}),Object(w.jsx)(R.a,{color:"textSecondary",variant:"body2",children:"This is the best place to see what\u2019s happening in your world. Find some people and topics to follow now."}),Object(w.jsx)(I.a,{mt:3,children:Object(w.jsx)(k,{size:"large",color:"primary",variant:"contained",onClick:function(){return a.push("/connect")},children:"Let's go!"})})]})})})}var Et=Object(v.a)((function(e){return{root:{display:"flex",alignItems:"flex-start","&::before, &::after":{content:'""',margin:"auto"}}}}));function zt(){var e=Et(),t=Object(a.useState)(null),n=Object(d.a)(t,2),r=n[0],c=n[1],i=Object(Ee.c)((function(e){return e.user})).user;return Object(a.useEffect)(Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ue(i,c),e.abrupt("return",(function(){return t()}));case 2:case"end":return e.stop()}}),e)}))),[]),Object(w.jsxs)($.a,{className:e.root,children:[Object(w.jsx)(qe,{}),Object(w.jsxs)($e,{children:[Object(w.jsx)(tt,{title:"Home"}),Object(w.jsx)(Me,{}),Object(w.jsx)(Wt,{display:0===(null===r||void 0===r?void 0:r.length)}),Object(w.jsx)(mt,{tweets:r})]}),Object(w.jsxs)(ht,{children:[Object(w.jsx)(wt,{}),Object(w.jsx)(It,{}),Object(w.jsx)(Ft,{})]})]})}var Ut=Object(v.a)((function(e){return{root:{display:"flex",alignItems:"flex-start","&::before, &::after":{content:'""',margin:"auto"}}}}));function Lt(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Ut();return Object(a.useEffect)((function(){var e=h.collection("tweets").where("parent","==",null).orderBy("timestamp","desc").onSnapshot((function(e){r(e.docs.map((function(e){var t=e.data(),n=e.id;return Object(o.a)({id:n},t)})))}));return function(){return e()}}),[]),Object(w.jsxs)($.a,{className:c.root,children:[Object(w.jsx)(qe,{}),Object(w.jsxs)($e,{children:[Object(w.jsx)(tt,{title:"Explore"}),Object(w.jsx)(mt,{tweets:n})]}),Object(w.jsxs)(ht,{children:[Object(w.jsx)(wt,{}),Object(w.jsx)(It,{}),Object(w.jsx)(Ft,{})]})]})}var At=n(137),Dt=n.n(At),_t=Object(v.a)((function(e){return{modal:{overflowY:"auto"},content:{position:"absolute",top:"5%",marginLeft:"auto",marginRight:"auto",left:0,right:0,maxWidth:"32rem",width:"100%",backgroundColor:e.palette.background.default,borderRadius:"1rem"},closeButton:{padding:e.spacing(1)},inputs:{display:"flex",flexDirection:"column",gap:e.spacing(3),padding:e.spacing(2)}}}));function Mt(){var e=_t(),t=Object(Ee.c)((function(e){return e.user})).user,n=Object(a.useState)(t.biography),r=Object(d.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(t.name),s=Object(d.a)(o,2),j=s[0],b=s[1],p=A(t.profilePictureURL),m=Object(d.a)(p,5),f=m[0],x=(m[1],m[2]),O=m[3],g=(m[4],A(t.headerImageURL)),v=Object(d.a)(g,5),y=v[0],S=(v[1],v[2]),C=v[3],P=v[4],R=Object(a.useState)(!1),B=Object(d.a)(R,2),F=B[0],T=B[1],W=function(){T(!1)},E=function(){var e=Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},t.name!==j&&(n.name=j),t.biography!==c&&(n.biography=c),t.profilePictureURL===f){e.next=7;break}return e.next=6,O();case 6:n.profilePictureURL=e.sent;case 7:if(t.headerImageURL===y){e.next=11;break}return e.next=10,C();case 10:n.headerImageURL=e.sent;case 11:h.collection("users").doc(t.username).update(n),W();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(k,{variant:"outlined",color:"secondary",onClick:function(){T(!0)},children:"Edit profile"}),Object(w.jsx)(ye.a,{open:F,onClose:W,BackdropProps:{style:{backgroundColor:"rgba(91, 112, 131, 0.4)"}},className:e.modal,children:Object(w.jsxs)("div",{className:e.content,children:[Object(w.jsxs)(I.a,{p:1,display:"flex",alignItems:"center",children:[Object(w.jsx)(M.a,{"aria-label":"close",className:e.closeButton,onClick:W,children:Object(w.jsx)(ge.a,{})}),Object(w.jsx)(I.a,{ml:"auto",children:Object(w.jsx)(k,{variant:"contained",color:"secondary",onClick:E,children:"Save"})})]}),Object(w.jsx)(ve.a,{}),Object(w.jsxs)(I.a,{className:e.inputs,children:[Object(w.jsx)(Z,{profilePreview:f,handleProfileInputImage:x,headerPreview:y,handleHeaderInputImage:S,removeHeaderImage:P}),Object(w.jsx)(N.a,{className:e.marginBottom,variant:"outlined",fullWidth:!0,label:"Name",type:"text",autoFocus:!0,value:j,onChange:function(e){return b(e.target.value)}}),Object(w.jsx)(N.a,{variant:"outlined",fullWidth:!0,label:"Your bio",type:"text",value:c,onChange:function(e){return i(e.target.value)},inputProps:{maxLength:150},autoFocus:!0,multiline:!0})]})]})})]})}var Vt=Object(v.a)((function(e){return{header:{backgroundColor:e.palette.grey[600],backgroundSize:"cover",backgroundPosition:"center"},content:{display:"flex",flexDirection:"column",padding:e.spacing(2,2,3,2),gap:e.spacing(2)},pictureContainer:{display:"flex",flexWrap:"wrap",alignItems:"flex-start",justifyContent:"space-between",marginBottom:e.spacing(1),gap:e.spacing(1)},profilePicture:{alignSelf:"flex-end",width:"25%",height:"auto",minWidth:"48px",aspectRatio:"1/1",marginTop:"-16%",marginBottom:"-2px",borderStyle:"solid",borderWidth:"4px",borderColor:e.palette.background.default},date:{verticalAlign:"text-bottom",fontSize:18},bio:{whiteSpace:"pre-line",width:"100%"}}}));function Ht(e){var t,n=e.user,a=Vt(),r=Object(Ee.c)((function(e){return e.user})).user,c=(null===n||void 0===n?void 0:n.headerImageURL)?"url(".concat(n.headerImageURL,")"):null,i=null===n||void 0===n||null===(t=n.createdAt)||void 0===t?void 0:t.toDate(),o=" Joined ".concat(null===i||void 0===i?void 0:i.toLocaleString("default",{month:"long"})," ").concat(null===i||void 0===i?void 0:i.getFullYear());return Object(w.jsx)(w.Fragment,{children:n&&r&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(I.a,{width:"100%",children:[Object(w.jsx)(I.a,{className:a.header,style:{backgroundImage:c},children:Object(w.jsx)(I.a,{width:"100%",pb:"33%"})}),Object(w.jsxs)(I.a,{className:a.content,children:[Object(w.jsxs)(I.a,{children:[Object(w.jsxs)(I.a,{className:a.pictureContainer,children:[Object(w.jsx)(_,{className:a.profilePicture,src:n.profilePictureURL}),r.username===n.username?Object(w.jsx)(Mt,{}):Object(w.jsx)(Rt,{user:n})]}),Object(w.jsx)(I.a,{fontWeight:"fontWeightBold",fontSize:"h6.fontSize",children:n.name}),Object(w.jsx)(R.a,{color:"textSecondary",variant:"body2",children:"@".concat(n.username)})]}),n.biography&&Object(w.jsx)(R.a,{variant:"body2",className:a.bio,children:n.biography}),Object(w.jsxs)(R.a,{color:"textSecondary",variant:"body2",children:[Object(w.jsx)(Dt.a,{className:a.date}),o]}),Object(w.jsxs)(I.a,{display:"flex",children:[Object(w.jsxs)(I.a,{fontWeight:"fontWeightBold",fontSize:"body2.fontSize",mr:2,children:[n.following.length," ",Object(w.jsx)(R.a,{color:"textSecondary",variant:"body2",component:"span",children:"Following"})]}),Object(w.jsxs)(I.a,{fontWeight:"fontWeightBold",fontSize:"body2.fontSize",children:[n.followers.length," ",Object(w.jsx)(R.a,{color:"textSecondary",variant:"body2",component:"span",children:"Followers"})]})]})]})]}),Object(w.jsx)(ve.a,{})]})})}var Gt=Object(v.a)((function(e){return{header:{backgroundColor:e.palette.grey[600],backgroundSize:"cover",backgroundPosition:"center"},content:{display:"flex",flexDirection:"column",padding:e.spacing(2),gap:e.spacing(2)},pictureContainer:{display:"flex",flexWrap:"wrap",alignItems:"flex-start",justifyContent:"space-between",marginBottom:e.spacing(1),gap:e.spacing(1)},profilePicture:{alignSelf:"flex-end",width:"25%",height:"auto",minWidth:"48px",aspectRatio:"1/1",marginTop:"-16%",marginBottom:"-2px",borderStyle:"solid",borderWidth:"4px",borderColor:e.palette.background.default},notFound:{width:"auto",marginTop:e.spacing(8),alignSelf:"center"}}}));function Yt(e){var t=e.username,n=Gt();return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(I.a,{width:"100%",children:[Object(w.jsx)(I.a,{className:n.header,children:Object(w.jsx)(I.a,{width:"100%",pb:"33%"})}),Object(w.jsxs)(I.a,{className:n.content,children:[Object(w.jsxs)(I.a,{children:[Object(w.jsx)(I.a,{className:n.pictureContainer,children:Object(w.jsx)(_,{className:n.profilePicture})}),Object(w.jsx)(I.a,{fontWeight:"fontWeightBold",fontSize:"h6.fontSize",children:"@".concat(t)})]}),Object(w.jsxs)(I.a,{className:n.notFound,children:[Object(w.jsx)(I.a,{fontWeight:"fontWeightBold",fontSize:"h4.fontSize",children:"This account doesn\u2019t exist"}),Object(w.jsx)(R.a,{color:"textSecondary",variant:"body2",children:"Try searching for another."})]})]})]})})}var Kt=Object(v.a)((function(e){return{root:{display:"flex",alignItems:"flex-start","&::before, &::after":{content:'""',margin:"auto"}}}}));function Jt(){var e=Object(b.h)().username,t=Object(a.useState)(null),n=Object(d.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(null),s=Object(d.a)(i,2),l=s[0],u=s[1],j=Kt();return Object(a.useEffect)((function(){var t=[];return t.push(function(e,t){var n=h.collection("users").doc(e).onSnapshot((function(n){n.exists?t(Object(o.a)(Object(o.a)({},n.data()),{},{username:e})):t(void 0)}));return function(){return n()}}(e,c)),t.push(function(e,t){var n=h.collection("tweets").where("username","==",e).where("parent","==",null).orderBy("timestamp","desc").onSnapshot((function(e){t(e.docs.map((function(e){var t=e.data(),n=e.id;return Object(o.a)({id:n},t)})))}));return function(){return n()}}(e,u)),function(){return t.forEach((function(e){return e()}))}}),[e]),Object(w.jsxs)($.a,{className:j.root,children:[Object(w.jsx)(qe,{}),Object(w.jsxs)($e,{children:[Object(w.jsx)(tt,{backButton:!0,title:e}),Object(w.jsx)(Ht,{user:r}),void 0===r&&Object(w.jsx)(Yt,{username:e}),Object(w.jsx)(mt,{tweets:l})]}),Object(w.jsxs)(ht,{children:[Object(w.jsx)(wt,{}),Object(w.jsx)(It,{}),Object(w.jsx)(Ft,{})]})]})}var qt=Object(v.a)((function(e){return{tweet:{display:"flex",alignItems:"flex-start",padding:e.spacing(2,2,0,2)},content:{width:"100%",display:"flex",flexDirection:"column"},tweetInfo:{display:"flex",gap:e.spacing(2),marginBottom:e.spacing(2)},tweetMessage:{whiteSpace:"pre-line",marginBottom:e.spacing(2)},tweetImage:{marginBottom:e.spacing(2)},iconButton:{padding:e.spacing(1)}}}));function Zt(e){var t,n,c=e.tweet,i=e.replies,o=qt(),s=Object(we.a)(),j=Object(b.g)(),m=Object(a.useState)(null),f=Object(d.a)(m,2),x=f[0],O=f[1],g=Object(Ee.c)((function(e){return e.user})).user,v=Object(a.useState)(null),y=Object(d.a)(v,2),S=y[0],k=y[1],N=Object(a.useState)(null),P=Object(d.a)(N,2),B=P[0],F=P[1],T=Object(a.useState)(null),W=Object(d.a)(T,2),E=W[0],z=W[1],U=Object(a.useState)(null),L=Object(d.a)(U,2),A=L[0],D=L[1],V=null===c||void 0===c||null===(t=c.timestamp)||void 0===t?void 0:t.toDate(),H=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F((function(e){return!e})),e.next=3,h.collection("tweets").doc(c.id).update({likes:B?p.a.firestore.FieldValue.arrayRemove(g.username):p.a.firestore.FieldValue.arrayUnion(g.username)});case 3:return e.next=5,h.collection("users").doc(g.username).update({likes:B?p.a.firestore.FieldValue.arrayRemove(c.id):p.a.firestore.FieldValue.arrayUnion(c.id)});case 5:k((function(e){return B?e-1:e+1}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D((function(e){return!e})),e.next=3,h.collection("tweets").doc(c.id).update({retweets:A?p.a.firestore.FieldValue.arrayRemove(g.username):p.a.firestore.FieldValue.arrayUnion(g.username)});case 3:return e.next=5,h.collection("users").doc(g.username).update({retweets:A?p.a.firestore.FieldValue.arrayRemove(c.id):p.a.firestore.FieldValue.arrayUnion(c.id)});case 5:z((function(e){return A?e-1:e+1}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)(Object(u.a)(l.a.mark((function e(){var t,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=O,e.next=3,Le(null===c||void 0===c?void 0:c.username);case 3:e.t1=e.sent,(0,e.t0)(e.t1),k(null===c||void 0===c||null===(t=c.likes)||void 0===t?void 0:t.length),F(null===g||void 0===g||null===(n=g.likes)||void 0===n?void 0:n.includes(null===c||void 0===c?void 0:c.id)),z(null===c||void 0===c||null===(a=c.retweets)||void 0===a?void 0:a.length),D(null===g||void 0===g||null===(r=g.retweets)||void 0===r?void 0:r.includes(null===c||void 0===c?void 0:c.id));case 9:case"end":return e.stop()}}),e)}))),[c]);var Y=[{text:"Reply",icon:Object(w.jsx)(at.a,{}),value:i,action:null,color:"#fff",activated:!1},{text:"Retweet",icon:Object(w.jsx)(ct.a,{}),value:E,action:G,color:"rgb(0, 186, 124)",activated:A},{text:"Like",icon:B?Object(w.jsx)(lt.a,{}):Object(w.jsx)(ot.a,{}),value:S,action:H,color:"rgb(249, 24, 128)",activated:B},{text:"Share",icon:Object(w.jsx)(dt.a,{}),value:null,action:null,color:"#fff",activated:!1}];return Object(w.jsx)(w.Fragment,{children:c&&x&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:o.tweet,children:Object(w.jsxs)(I.a,{className:o.content,children:[Object(w.jsxs)(I.a,{className:o.tweetInfo,children:[Object(w.jsx)(_,{className:o.avatar,src:x.profilePictureURL}),Object(w.jsxs)(I.a,{children:[Object(w.jsx)(C.a,{variant:"body1",color:"textPrimary",component:"span",onClick:function(){return j.push("/profile/".concat(c.username))},children:Object(w.jsx)(I.a,{fontWeight:"fontWeightMedium",children:x.name})}),Object(w.jsx)(R.a,{variant:"body1",color:"textSecondary",component:"span",noWrap:!0,children:"@".concat(x.username)})]})]}),(null===(n=c.message)||void 0===n?void 0:n.length)>0&&Object(w.jsx)(I.a,{fontSize:24,className:o.tweetMessage,children:c.message}),Object(w.jsx)(We,{src:c.imageUrl,className:o.tweetImage,contain:!1}),Object(w.jsx)(I.a,{mb:2,children:[V.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})," \xb7 ","".concat(V.toLocaleString("en-us",{month:"short"})," ").concat(V.getDate(),", ").concat(V.getFullYear())," \xb7 ","Twitter Web App"].map((function(e,t){return Object(w.jsx)(R.a,{variant:"body1",color:"textSecondary",component:"span",noWrap:!0,children:e},t)}))}),Object(w.jsx)(ve.a,{}),Object(w.jsx)(I.a,{display:"flex",alignItems:"center",my:2,children:Y.slice(0,-1).map((function(e,t){return Object(w.jsxs)(I.a,{mr:2,children:[Object(w.jsx)(R.a,{variant:"body1",component:"span",children:e.value}),Object(w.jsxs)(R.a,{variant:"body1",component:"span",color:"textSecondary",children:[" ",e.text]})]},t)}))}),Object(w.jsx)(ve.a,{}),Object(w.jsx)(I.a,{display:"flex",justifyContent:"space-around",my:.75,children:Y.map((function(e,t){return Object(w.jsx)(M.a,{style:{color:e.activated?e.color:s.palette.text.secondary},onClick:e.action,className:o.iconButton,children:r.a.cloneElement(e.icon,{style:{fontSize:24}})})}))}),Object(w.jsx)(ve.a,{})]})}),Object(w.jsx)(Me,{parent:null===c||void 0===c?void 0:c.id})]})})}var $t=Object(v.a)((function(e){return{root:{display:"flex",alignItems:"flex-start","&::before, &::after":{content:'""',margin:"auto"}}}}));function Qt(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(b.h)().tweetid,i=Object(a.useState)(null),s=Object(d.a)(i,2),l=s[0],u=s[1],j=$t();return Object(a.useEffect)((function(){h.collection("tweets").doc(c).get().then((function(e){var t=e.data(),n=c;u(Object(o.a)({id:n},t))}));var e=h.collection("tweets").where("parent","==",c).orderBy("timestamp","desc").onSnapshot((function(e){r(e.docs.map((function(e){var t=e.data(),n=e.id;return Object(o.a)({id:n},t)})))}));return function(){return e()}}),[c]),Object(w.jsxs)($.a,{className:j.root,children:[Object(w.jsx)(qe,{}),Object(w.jsxs)($e,{children:[Object(w.jsx)(tt,{title:"Tweet",backButton:!0}),Object(w.jsx)(Zt,{tweet:l,replies:null===n||void 0===n?void 0:n.length}),Object(w.jsx)(mt,{tweets:n})]}),Object(w.jsxs)(ht,{children:[Object(w.jsx)(wt,{}),Object(w.jsx)(It,{}),Object(w.jsx)(Ft,{})]})]})}var Xt=Object(v.a)((function(e){return{root:{display:"flex",alignItems:"flex-start","&::before, &::after":{content:'""',margin:"auto"}}}}));function en(){var e=Xt(),t=Object(b.g)();return Object(w.jsxs)($.a,{className:e.root,children:[Object(w.jsx)(qe,{}),Object(w.jsxs)(I.a,{flexGrow:1,mt:8,textAlign:"center",children:[Object(w.jsx)(I.a,{mb:4,children:Object(w.jsx)(R.a,{variant:"body2",color:"textSecondary",children:"Hmm...this page doesn\u2019t exist."})}),Object(w.jsx)(k,{color:"primary",variant:"contained",onClick:t.goBack,children:"Go back"})]})]})}function tn(e){var t=e.component,n=Object(O.a)(e,["component"]),a=Object(Ee.c)((function(e){return e.user})),r=a.firebaseUser,c=a.user;return Object(w.jsx)(b.b,Object(o.a)(Object(o.a)({},n),{},{render:function(e){return r||void 0===c?c&&Object(w.jsx)(t,Object(o.a)({},e)):Object(w.jsx)(b.a,{to:"/login"})}}))}var nn=n(220),an=n(219),rn=Object(v.a)((function(e){return{list:{padding:0},listItem:{padding:e.spacing(1.5,2)},showMore:{padding:e.spacing(1.5,2),borderRadius:e.spacing(0,0,2,2)},avatar:{marginRight:e.spacing(2)}}}));function cn(){var e=rn(),t=Object(b.g)(),n=Object(Ee.c)((function(e){return e.user})).user,r=Object(a.useState)(null),c=Object(d.a)(r,2),i=c[0],s=c[1];return Object(a.useEffect)(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,t=n,h.collection("users").where(p.a.firestore.FieldPath.documentId(),"not-in",[t.username].concat(Object(ze.a)(t.following))).get().then((function(e){return e.docs.map((function(e){var t=e.id,n=e.data();return Object(o.a)(Object(o.a)({},n),{},{username:t})}))}));case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}var t}),e)}))),[]),Object(w.jsx)(w.Fragment,{children:i&&Object(w.jsx)(St.a,{className:e.list,children:i&&i.map((function(n,a){return Object(w.jsxs)(kt.a,{className:e.listItem,button:!0,onClick:function(){return t.push("/profile/".concat(n.username))},children:[Object(w.jsx)(_,{src:n.profilePictureURL,className:e.avatar}),Object(w.jsx)(Nt.a,{secondary:"@".concat(n.username),children:Object(w.jsx)(R.a,{variant:"body2",component:"span",children:Object(w.jsx)(I.a,{fontWeight:"fontWeightMedium",children:n.name})})}),Object(w.jsx)(Pt.a,{children:Object(w.jsx)(Rt,{size:"small",user:n,children:"Follow"})})]},a)}))})})}var on=Object(v.a)((function(e){return{root:{display:"flex",alignItems:"flex-start","&::before, &::after":{content:'""',margin:"auto"}}}}));function sn(){var e=on();return Object(w.jsxs)($.a,{className:e.root,children:[Object(w.jsx)(qe,{}),Object(w.jsxs)($e,{children:[Object(w.jsx)(tt,{title:"Connect",backButton:!0}),Object(w.jsx)(cn,{})]}),Object(w.jsxs)(ht,{children:[Object(w.jsx)(wt,{}),Object(w.jsx)(It,{})]})]})}var ln=Object(v.a)((function(e){return{list:{padding:0},listItem:{padding:e.spacing(1.5,2)},showMore:{padding:e.spacing(1.5,2),borderRadius:e.spacing(0,0,2,2)},avatar:{marginRight:e.spacing(2)}}}));function un(){var e=ln(),t=Object(b.g)(),n=Object(a.useState)(null),r=Object(d.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){var e=function(e){var t=h.collection("activity").orderBy("timestamp","desc").onSnapshot(function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,Promise.all(n.docs.map(function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data(),e.next=3,h.collection("users").doc(n.username).get().then((function(e){return e.data()}));case 3:return a=e.sent,e.abrupt("return",Object(o.a)({profilePictureURL:null===a||void 0===a?void 0:a.profilePictureURL},n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return function(){return t()}}(i);return function(){return e()}}),[]),Object(w.jsx)(St.a,{className:e.list,children:c&&c.map((function(n,a){var r;return Object(w.jsxs)(kt.a,{className:e.listItem,onClick:function(){return t.push("/profile/".concat(n.username))},button:!0,children:[Object(w.jsx)(_,{className:e.avatar,src:null===n||void 0===n?void 0:n.profilePictureURL}),Object(w.jsx)(Nt.a,{secondary:jt(null===(r=n.timestamp)||void 0===r?void 0:r.toDate()),children:Object(w.jsx)(R.a,{variant:"body2",children:null===n||void 0===n?void 0:n.message})})]},a)}))})}var dn=Object(v.a)((function(e){return{root:{display:"flex",alignItems:"flex-start","&::before, &::after":{content:'""',margin:"auto"}}}}));function jn(){var e=dn();return Object(w.jsxs)($.a,{className:e.root,children:[Object(w.jsx)(qe,{}),Object(w.jsxs)($e,{children:[Object(w.jsx)(tt,{title:"Activity",backButton:!0}),Object(w.jsx)(un,{})]}),Object(w.jsxs)(ht,{children:[Object(w.jsx)(wt,{}),Object(w.jsx)(Ft,{})]})]})}var bn=Object(v.a)((function(e){return{root:{display:"flex",alignItems:"flex-start","&::before, &::after":{content:'""',margin:"auto"}},list:{padding:0}}}));function pn(){var e=bn(),t=Object(Ee.c)((function(e){return e.user})).user,n=[{title:"Username",info:"@".concat(null===t||void 0===t?void 0:t.username)},{title:"Name",info:null===t||void 0===t?void 0:t.name},{title:"Email",info:null===t||void 0===t?void 0:t.email},{title:"Account Creation",info:null===t||void 0===t?void 0:t.createdAt.toDate().toString()}];return Object(w.jsxs)($.a,{className:e.root,children:[Object(w.jsx)(qe,{}),Object(w.jsxs)($e,{children:[Object(w.jsx)(tt,{title:"Settings",backButton:!0}),Object(w.jsx)(St.a,{className:e.list,children:n.map((function(t,n){return Object(w.jsx)(kt.a,{className:e.listItem,button:!0,children:Object(w.jsx)(Nt.a,{secondary:t.info,children:Object(w.jsx)(R.a,{variant:"body2",component:"span",children:Object(w.jsx)(I.a,{fontWeight:"fontWeightMedium",children:t.title})})})},n)}))})]}),Object(w.jsx)(ht,{copyright:!1})]})}var mn=function(){var e=Object(Ee.c)((function(e){return e.theme})).theme,t=Object(Ee.c)((function(e){return e.user})).firebaseUser,n=Object(a.useState)(!0),r=Object(d.a)(n,2),c=r[0],i=r[1],s=Object(Ee.b)();return Object(a.useEffect)((function(){var e=f.onAuthStateChanged(function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(Ke(t)),i(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){return e()}}),[s]),Object(a.useEffect)(Object(u.a)(l.a.mark((function e(){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(){},!t){e.next=12;break}return e.prev=2,e.next=5,h.collection("uid").doc(t.uid).get().then((function(e){return e.data().username}));case 5:a=e.sent,n=h.collection("users").doc(a).onSnapshot((function(e){var t=Object(o.a)(Object(o.a)({},e.data()),{},{username:a});s(Ye(t))})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),s(Ye(void 0));case 12:return e.abrupt("return",(function(){return n()}));case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),[t,s]),Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(j.a,{children:Object(w.jsxs)(an.a,{theme:e,children:[Object(w.jsx)(nn.a,{}),!c&&Object(w.jsxs)(b.d,{children:[Object(w.jsx)(b.b,{exact:!0,path:"/",children:Object(w.jsx)(b.a,{to:"/home"})}),Object(w.jsx)(tn,{path:"/home",component:zt}),Object(w.jsx)(tn,{path:"/explore",component:Lt}),Object(w.jsx)(tn,{path:"/profile/:username",component:Jt}),Object(w.jsx)(tn,{path:"/settings",component:pn}),Object(w.jsx)(tn,{path:"/connect",component:sn}),Object(w.jsx)(tn,{path:"/activity",component:jn}),Object(w.jsx)(tn,{path:"/tweet/:tweetid",component:Qt}),Object(w.jsx)(b.b,{path:"/login",component:U}),Object(w.jsx)(b.b,{path:"/signup",component:X}),Object(w.jsx)(b.b,{path:"*",component:en})]})]})})})},fn=n(77),hn=n(138),xn={firebaseUser:null,user:null};var On=n(139),gn=Object(On.a)({palette:{type:"dark",primary:{main:"rgb(29, 161, 242)",contrastText:"#fff"},secondary:{main:"#fff",contrastText:"rgb(15, 20, 25)"},background:{default:"#000000",paper:"#15181c"},divider:"rgba(255,255,255,0.20)"},typography:{body2:{fontSize:".925rem"}},shadows:["none"]}),vn=Object(On.a)({palette:{type:"dark",primary:{main:"rgb(29, 161, 242)",contrastText:"#fff"},secondary:{main:"#fff",contrastText:"rgb(15, 20, 25)"},background:{default:"rgb(21, 32, 43)",paper:"rgb(25, 39, 52)"},divider:"rgba(255,255,255,0.20)"},typography:{body2:{fontSize:".925rem"}},shadows:["none"]}),yn=Object(On.a)({palette:{type:"light",primary:{main:"rgb(29, 161, 242)",contrastText:"#fff"},secondary:{main:"rgb(15, 20, 25)",contrastText:"#fff"},background:{default:"#fff",paper:"rgb(247, 249, 249)"},text:{secondary:"rgba(0, 0, 0, 0.70)"},divider:"rgba(0,0,0,0.075)"},typography:{body2:{fontSize:".925rem"}},shadows:["none"]}),wn={type:"dark",theme:gn},Sn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_THEME":return"dark"===e.type?{type:"dim",theme:Object(o.a)({},vn)}:"dim"===e.type?{type:"light",theme:Object(o.a)({},yn)}:"light"===e.type?{type:"dark",theme:Object(o.a)({},gn)}:e;default:return e}},kn=Object(fn.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object(o.a)(Object(o.a)({},e),{},{user:t.payload});case"SET_FIREBASE_USER":return Object(o.a)(Object(o.a)({},e),{},{firebaseUser:t.payload});default:return e}},theme:Sn}),Nn=Object(fn.c)(kn,Object(fn.a)(hn.a));i.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(Ee.a,{store:Nn,children:Object(w.jsx)(mn,{})})}),document.getElementById("root"))}},[[170,1,2]]]);
//# sourceMappingURL=main.37855dc8.chunk.js.map